<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>05 Java 多线程基础 | 林深时觉寒</title><meta name="keywords" content="并发编程,Java"><meta name="author" content="Limor"><meta name="copyright" content="Limor"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="05 Java 多线程基础线程四种创建方式继承 Thread 类1234567891011121314151617181920212223242526272829303132333435363738394041424344import org.apache.commons.io.FileUtils;import java.io.File;import java.io.IOException;imp">
<meta property="og:type" content="article">
<meta property="og:title" content="05 Java 多线程基础">
<meta property="og:url" content="https://kangjia1324.github.io/04-Java/concurrent/05%20Java%20%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="林深时觉寒">
<meta property="og:description" content="05 Java 多线程基础线程四种创建方式继承 Thread 类1234567891011121314151617181920212223242526272829303132333435363738394041424344import org.apache.commons.io.FileUtils;import java.io.File;import java.io.IOException;imp">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/7.jpg">
<meta property="article:published_time" content="2021-04-25T12:30:24.000Z">
<meta property="article:modified_time" content="2021-05-27T17:51:08.489Z">
<meta property="article:author" content="Limor">
<meta property="article:tag" content="并发编程">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/7.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/toux1.jpg"><link rel="canonical" href="https://kangjia1324.github.io/04-Java/concurrent/05%20Java%20%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":800},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '05 Java 多线程基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-05-28 01:51:08'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="/self/monokai-sublime.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/toux1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> Java 技术</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/"><span> Java 基础</span></a></li><li><a class="site-page child" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"><span> Java 并发编程</span></a></li><li><a class="site-page child" href="/"><span> Java 集合框架</span></a></li><li><a class="site-page child" href="/"><span> Java 虚拟机</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/%E8%BD%AF%E7%A1%AC%E4%BB%B6%E4%BD%BF%E7%94%A8/"><span> Toolkits</span></a></div><div class="menus_item"><a class="site-page" href="/categories/%E6%95%85%E4%BA%8B/"><span> 故事</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/7.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">林深时觉寒</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> Java 技术</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/"><span> Java 基础</span></a></li><li><a class="site-page child" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"><span> Java 并发编程</span></a></li><li><a class="site-page child" href="/"><span> Java 集合框架</span></a></li><li><a class="site-page child" href="/"><span> Java 虚拟机</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/%E8%BD%AF%E7%A1%AC%E4%BB%B6%E4%BD%BF%E7%94%A8/"><span> Toolkits</span></a></div><div class="menus_item"><a class="site-page" href="/categories/%E6%95%85%E4%BA%8B/"><span> 故事</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">05 Java 多线程基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-04-25T12:30:24.000Z" title="发表于 2021-04-25 20:30:24">2021-04-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-05-27T17:51:08.489Z" title="更新于 2021-05-28 01:51:08">2021-05-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>18分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="05 Java 多线程基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="05-Java-多线程基础"><a href="#05-Java-多线程基础" class="headerlink" title="05 Java 多线程基础"></a>05 Java 多线程基础</h1><h2 id="线程四种创建方式"><a href="#线程四种创建方式" class="headerlink" title="线程四种创建方式"></a>线程四种创建方式</h2><h3 id="继承-Thread-类"><a href="#继承-Thread-类" class="headerlink" title="继承 Thread 类"></a>继承 Thread 类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.commons.io.FileUtils;<br><span class="hljs-keyword">import</span> java.io.File;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.URL;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 创建线程的方式一：继承 Thread类，重写 run 方法，调用 start 方法开启线程</span><br><span class="hljs-comment"> * 总结：注意，线程开启不一定立即执行，由 CPU 调度执行</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * 练习 Thread，多线程下载图片</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestThread2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Thread</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String url; <span class="hljs-comment">// 网络图片地址</span><br>    <span class="hljs-keyword">private</span> String name;  <span class="hljs-comment">// 保存的文件名</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TestThread2</span><span class="hljs-params">(String url, String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.url = url;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        WebDownLoader downLoader = <span class="hljs-keyword">new</span> WebDownLoader();<br>        downLoader.downloader(url, name);<br>        System.out.println(<span class="hljs-string">&quot;您下载了名为：&quot;</span> + name + <span class="hljs-string">&quot;的文件&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-keyword">new</span> TestThread2(<span class="hljs-string">&quot;https://i0.hdslb.com/bfs/vc/da55fab2e559b4458ece1f92b9060d6e1bccaac7.jpg&quot;</span>, <span class="hljs-string">&quot;1.jpg&quot;</span>).start();<br>        <span class="hljs-keyword">new</span> TestThread2(<span class="hljs-string">&quot;https://i0.hdslb.com/bfs/vc/da55fab2e559b4458ece1f92b9060d6e1bccaac7.jpg&quot;</span>, <span class="hljs-string">&quot;2.jpg&quot;</span>).start();<br>        <span class="hljs-keyword">new</span> TestThread2(<span class="hljs-string">&quot;https://i0.hdslb.com/bfs/vc/da55fab2e559b4458ece1f92b9060d6e1bccaac7.jpg&quot;</span>, <span class="hljs-string">&quot;3.jpg&quot;</span>).start();<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 下载器</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebDownLoader</span> </span>&#123;<br>    <span class="hljs-comment">// 下载方法</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">downloader</span><span class="hljs-params">(String url, String name)</span> </span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            FileUtils.copyURLToFile(<span class="hljs-keyword">new</span> URL(url), <span class="hljs-keyword">new</span> File(name));<br><br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;下载方法出现异常&quot;</span> + e.getLocalizedMessage());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="实现-Runnable-接口"><a href="#实现-Runnable-接口" class="headerlink" title="实现 Runnable 接口"></a>实现 Runnable 接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.commons.io.FileUtils;<br><span class="hljs-keyword">import</span> java.io.File;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.URL;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 创建线程的方式二：实现 runnable 接口，重写 run 方法，创建 Thread 对象，调用 start 方法开启线程</span><br><span class="hljs-comment"> * 练习 runnable，多线程下载图片</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TeatThread3</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String url; <span class="hljs-comment">// 网络图片地址</span><br>    <span class="hljs-keyword">private</span> String name;  <span class="hljs-comment">// 保存的文件名</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TeatThread3</span><span class="hljs-params">(String url, String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.url = url;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        WebDownLoader downLoader = <span class="hljs-keyword">new</span> WebDownLoader();<br>        downLoader.downloader(url, name);<br>        System.out.println(<span class="hljs-string">&quot;您下载了名为：&quot;</span> + name + <span class="hljs-string">&quot;的文件&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-keyword">final</span> TestThread2 t1 = <span class="hljs-keyword">new</span> TestThread2(<span class="hljs-string">&quot;https://i0.hdslb.com/bfs/vc/da55fab2e559b4458ece1f92b9060d6e1bccaac7.jpg&quot;</span>, <span class="hljs-string">&quot;1.jpg&quot;</span>);<br>        <span class="hljs-keyword">final</span> TestThread2 t2 = <span class="hljs-keyword">new</span> TestThread2(<span class="hljs-string">&quot;https://i0.hdslb.com/bfs/vc/da55fab2e559b4458ece1f92b9060d6e1bccaac7.jpg&quot;</span>, <span class="hljs-string">&quot;2.jpg&quot;</span>);<br>        <span class="hljs-keyword">final</span> TestThread2 t3 = <span class="hljs-keyword">new</span> TestThread2(<span class="hljs-string">&quot;https://i0.hdslb.com/bfs/vc/da55fab2e559b4458ece1f92b9060d6e1bccaac7.jpg&quot;</span>, <span class="hljs-string">&quot;3.jpg&quot;</span>);<br><br>        <span class="hljs-keyword">new</span> Thread(t1).start();<br>        <span class="hljs-keyword">new</span> Thread(t2).start();<br>        <span class="hljs-keyword">new</span> Thread(t3).start();<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 下载器</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebDownLoader2</span> </span>&#123;<br>    <span class="hljs-comment">// 下载方法</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">downloader</span><span class="hljs-params">(String url, String name)</span> </span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            FileUtils.copyURLToFile(<span class="hljs-keyword">new</span> URL(url), <span class="hljs-keyword">new</span> File(name));<br><br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;下载方法出现异常&quot;</span> + e.getLocalizedMessage());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>小结：</p>
<p>继承 Thread 类</p>
<ul>
<li>子类继承 Thread 类具备多线程能力</li>
<li>启动线程：子类对象.start()</li>
<li>不建议使用：避免 OOP 单继承局限性</li>
</ul>
<p>实现 Runnable 接口</p>
<ul>
<li>实现接口 Runnable 具有多线程能力</li>
<li>启动线程：传入目标对象 + Thread 对象.start()</li>
<li>推荐使用：避免单继承局限性，灵活方便，方便同一个对象被多个线程使用</li>
</ul>
</blockquote>
<h3 id="实现-Callable-接口"><a href="#实现-Callable-接口" class="headerlink" title="实现 Callable 接口"></a>实现 Callable 接口</h3><ol>
<li>实现 Callable 接口，需要返回值类型</li>
<li>重写 call 方法</li>
<li>创建目标对象</li>
<li>创建执行服务 <code>ExecutorService service = Executors.newFixedThreadPool(1);</code></li>
<li>提交执行 <code>final Future&lt;Boolean&gt; s1 = service.submit(t1);</code></li>
<li>获取结果 <code>final Boolean b1 = s1.get();</code></li>
<li>关闭服务 <code>service.shutdown();</code></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.commons.io.FileUtils;<br><span class="hljs-keyword">import</span> java.io.File;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.URL;<br><span class="hljs-keyword">import</span> java.util.concurrent.*;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 创建线程方式三：实现 Callable 接口</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestCallable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Callable</span>&lt;<span class="hljs-title">Boolean</span>&gt; </span>&#123;<br>    <span class="hljs-keyword">private</span> String url; <span class="hljs-comment">// 网络图片地址</span><br>    <span class="hljs-keyword">private</span> String name;  <span class="hljs-comment">// 保存的文件名</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TestCallable</span><span class="hljs-params">(String url, String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.url = url;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Boolean <span class="hljs-title">call</span><span class="hljs-params">()</span> </span>&#123;<br>        WebDownLoader downLoader = <span class="hljs-keyword">new</span> WebDownLoader();<br>        downLoader.downloader(url, name);<br>        System.out.println(<span class="hljs-string">&quot;您下载了名为：&quot;</span> + name + <span class="hljs-string">&quot;的文件&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ExecutionException, InterruptedException </span>&#123;<br>        <span class="hljs-keyword">final</span> TestCallable t1 = <span class="hljs-keyword">new</span> TestCallable(<span class="hljs-string">&quot;https://i0.hdslb.com/bfs/vc/da55fab2e559b4458ece1f92b9060d6e1bccaac7.jpg&quot;</span>, <span class="hljs-string">&quot;1.jpg&quot;</span>);<br>        <span class="hljs-keyword">final</span> TestCallable t2 = <span class="hljs-keyword">new</span> TestCallable(<span class="hljs-string">&quot;https://i0.hdslb.com/bfs/vc/da55fab2e559b4458ece1f92b9060d6e1bccaac7.jpg&quot;</span>, <span class="hljs-string">&quot;2.jpg&quot;</span>);<br>        <span class="hljs-keyword">final</span> TestCallable t3 = <span class="hljs-keyword">new</span> TestCallable(<span class="hljs-string">&quot;https://i0.hdslb.com/bfs/vc/da55fab2e559b4458ece1f92b9060d6e1bccaac7.jpg&quot;</span>, <span class="hljs-string">&quot;3.jpg&quot;</span>);<br><br>        <span class="hljs-comment">// 创建执行服务</span><br>        ExecutorService service = Executors.newFixedThreadPool(<span class="hljs-number">1</span>);<br><br>        <span class="hljs-comment">// 提交执行</span><br>        <span class="hljs-keyword">final</span> Future&lt;Boolean&gt; s1 = service.submit(t1);<br>        <span class="hljs-keyword">final</span> Future&lt;Boolean&gt; s2 = service.submit(t2);<br>        <span class="hljs-keyword">final</span> Future&lt;Boolean&gt; s3 = service.submit(t3);<br><br>        <span class="hljs-comment">// 获取结果</span><br>        <span class="hljs-keyword">final</span> Boolean b1 = s1.get();<br>        <span class="hljs-keyword">final</span> Boolean b2 = s2.get();<br>        <span class="hljs-keyword">final</span> Boolean b3 = s3.get();<br><br>        System.out.println(b1);<br>        System.out.println(b2);<br>        System.out.println(b3);<br><br>        <span class="hljs-comment">// 关闭服务</span><br>        service.shutdown();<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 下载器</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebDownLoader3</span> </span>&#123;<br>    <span class="hljs-comment">// 下载方法</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">downloader</span><span class="hljs-params">(String url, String name)</span> </span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            FileUtils.copyURLToFile(<span class="hljs-keyword">new</span> URL(url), <span class="hljs-keyword">new</span> File(name));<br><br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;下载方法出现异常&quot;</span> + e.getLocalizedMessage());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>使用 Callable 接口的好处，可以获取返回值，可以抛出异常。</p>
</blockquote>
<h3 id="使用-Executors-工具类创建线程池"><a href="#使用-Executors-工具类创建线程池" class="headerlink" title="使用 Executors 工具类创建线程池"></a>使用 Executors 工具类创建线程池</h3><p>Executors 提供了一系列工厂方法用于创建线程池，返回的线程池都实现了 <code>ExecutorService</code> 接口。</p>
<p>主要有 <code>newFixedThreadPool</code>，<code>newCachedThreadPool</code>，<code>newSingleThreadExecutor</code>，<code>newScheduledThreadPool</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot; run()方法执行中...&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingleThreadExecutorTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ExecutorService executorService = Executors.newSingleThreadExecutor();<br>        MyRunnable runnableTest = <span class="hljs-keyword">new</span> MyRunnable();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>            executorService.execute(runnableTest);<br>        &#125;<br><br>        System.out.println(<span class="hljs-string">&quot;线程任务开始执行&quot;</span>);<br>        executorService.shutdown();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>执行结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">线程任务开始执行<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span> is running...<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span> is running...<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span> is running...<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span> is running...<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span> is running...<br></code></pre></td></tr></table></figure>

<h3 id="runnable-和-callable-对比"><a href="#runnable-和-callable-对比" class="headerlink" title="runnable 和 callable 对比"></a>runnable 和 callable 对比</h3><p>相同点</p>
<ul>
<li>都是接口</li>
<li>都可以编写多线程程序</li>
<li>都采用 <code>Thread.start()</code> 启动线程</li>
</ul>
<p>主要区别</p>
<ul>
<li>Runnable 接口 run 方法无返回值；Callable 接口 call 方法有返回值，是个泛型，和 Future、FutureTask 配合可以用来获取异步执行的结果</li>
<li>Runnable 接口 run 方法只能抛出运行时异常，且无法捕获处理；Callable 接口 call 方法允许抛出异常，可以获取异常信息</li>
</ul>
<p><strong>注</strong>：Callalbe 接口支持返回执行结果，需要调用 <code>FutureTask.get() </code> 得到，此方法会阻塞主进程的继续往下执行，如果不调用不会阻塞。</p>
<h3 id="为什么调用-start-而不直接调用-run"><a href="#为什么调用-start-而不直接调用-run" class="headerlink" title="为什么调用 start() 而不直接调用 run()"></a>为什么调用 start() 而不直接调用 run()</h3><p>new 一个 <code>Thread</code>，线程进入了新建状态。调用 <code>start()</code> 方法，会启动一个线程并使线程进入了就绪状态，当分配到时间片后就可以开始运行了。 <code>start()</code> 会执行线程的相应准备工作，然后自动执行 <code>run() </code>方法的内容，这是真正的多线程工作。</p>
<p>而直接执行 <code>run()</code> 方法，会把 <code>run()</code> 方法当成一个 <code>main</code> 线程下的普通方法去执行，并不会在某个线程中执行它，所以这并不是多线程工作。</p>
<p><strong>总结： 调用 <code>start()</code>  方法方可启动线程并使线程进入就绪状态，而 <code>run() </code>方法只是 <code>Thread</code>  的一个普通方法调用，还是在主线程里执行。</strong></p>
<h3 id="线程的-run-和-start-区别"><a href="#线程的-run-和-start-区别" class="headerlink" title="线程的 run() 和 start() 区别"></a>线程的 run() 和 start() 区别</h3><p>每个线程都是通过某个特定 <code>Thread</code> 对象所对应的方法 <code>run()</code> 来完成其操作的，<code>run()</code> 方法称为线程体。通过调用 <code>Thread</code> 类的 <code>start()</code> 方法来启动一个线程。</p>
<p><code>start()</code>  方法用于启动线程，<code>run()</code>  方法用于执行线程的运行时代码。<code>run()</code>  可以重复调用，而 <code>start() </code> 只能调用一次。</p>
<p><code>start()</code> 方法来启动一个线程，真正实现了多线程运行。调用 <code>start()</code> 方法无需等待 <code>run()</code>方法体执行完毕，可以直接继续执行其他的代码； 此时线程是处于就绪状态，并没有运行。 然后通过此 <code>Thread</code> 类调用方法 <code>run()</code> 来完成其运行状态， <code>run()</code> 方法运行结束， 此线程终止。然后 CPU 再调度其它线程。</p>
<p><code>run()</code> 方法是在本线程里的，只是线程里的一个函数，不是多线程的。 如果直接调用 <code>run()</code>，就相当于是调用了一个普通函数，直接待用 <code>run()</code> 方法必须等待 <code>run()</code> 方法执行完毕才能执行下面的代码，所以执行路径还是只有一条，根本就没有线程的特征，所以在多线程执行时要使用 <code>start()</code> 方法而不是 <code>run()</code> 方法。</p>
<h2 id="线程停止"><a href="#线程停止" class="headerlink" title="线程停止"></a>线程停止</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 1. 建议线程正常停止</span><br><span class="hljs-comment"> * 2. 建议使用标志位——》设置一个标志位</span><br><span class="hljs-comment"> * 3. 不要使用 stop 或 destroy 等过时或者 JDK 不建议使用的方法</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThreadStop</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span></span>&#123;<br>    <span class="hljs-comment">// 1.设置一个标识位</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">true</span>;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (flag) &#123;<br>            System.out.println(<span class="hljs-string">&quot;run……Thread&quot;</span> + i++);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 2. 设置一个公开的方法停止线程，转换标志位</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.flag = <span class="hljs-keyword">false</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ThreadStop stop = <span class="hljs-keyword">new</span> ThreadStop();<br>        <span class="hljs-keyword">new</span> Thread(stop).start();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;main&quot;</span> + i);<br>            <span class="hljs-keyword">if</span> (i==<span class="hljs-number">2</span>) &#123;<br>                stop.stop();<br>                System.out.println(<span class="hljs-string">&quot;线程该停止了&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">run……Thread0<br>main0<br>run……Thread1<br>main1<br>run……Thread2<br>main2<br>run……Thread3<br>线程该停止了<br>main3<br>main4<br></code></pre></td></tr></table></figure>

<h2 id="线程休眠-sleep"><a href="#线程休眠-sleep" class="headerlink" title="线程休眠 sleep"></a>线程休眠 sleep</h2><h3 id="sleep-有啥特点"><a href="#sleep-有啥特点" class="headerlink" title="sleep 有啥特点"></a>sleep 有啥特点</h3><p>指定当前线程阻塞的毫秒数</p>
<p>存在异常 InterruptedException</p>
<p>时间到达后线程进入就绪状态</p>
<p>模拟网络延时：放大问题的发生性</p>
<p>倒计时</p>
<p>每个对象都有一个锁，Sleep 不会释放锁</p>
<h3 id="wait-和-sleep-的区别"><a href="#wait-和-sleep-的区别" class="headerlink" title="wait 和 sleep 的区别"></a>wait 和 sleep 的区别</h3><ol>
<li>来自不同的类 wait 来自 Object ，sleep 来自 Thread 类。企业当中休眠一般不用 sleep，会使用 TimeUnit</li>
<li><strong>关于锁的释放。wait 会释放锁，sleep，抱着锁睡觉，不会释放锁</strong></li>
<li>使用范围不同。sleep 可以在任何地方使用。wait 必须在同步代码块中使用。</li>
<li>是否需要捕获异常。wait 不需要异常，sleep 必须要捕获异常</li>
</ol>
<h3 id="实现倒计时"><a href="#实现倒计时" class="headerlink" title="实现倒计时"></a>实现倒计时</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * sleep 模拟倒计时</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestSleep</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>&#123;<br>        <span class="hljs-comment">//        timeDown(20); //模拟倒计时 10，9，8，7，6，5，4，3，2，1</span><br>        <span class="hljs-comment">// 获取系统当前时间</span><br>        Date startTime = <span class="hljs-keyword">new</span> Date(System.currentTimeMillis());<br>        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;<br>            <span class="hljs-keyword">final</span> String format = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">&quot;HH:mm:ss&quot;</span>).format(startTime);<br>            System.out.println(format);<br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>            startTime = <span class="hljs-keyword">new</span> Date(System.currentTimeMillis());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 模拟倒计时</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">timeDown</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>&#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;<br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>            System.out.println(num--);<br>            <span class="hljs-keyword">if</span> (num&lt;=<span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="模拟延时"><a href="#模拟延时" class="headerlink" title="模拟延时"></a>模拟延时</h3><p><strong>不加模拟延时时：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 当没有模拟延时</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestSleep2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>  ticketNum = <span class="hljs-number">10</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>&#123;<br>        <span class="hljs-keyword">final</span> TestSleep2 testSleep2 = <span class="hljs-keyword">new</span> TestSleep2();<br>        <span class="hljs-keyword">new</span> Thread(testSleep2, <span class="hljs-string">&quot;小明&quot;</span>).start();<br>        <span class="hljs-keyword">new</span> Thread(testSleep2, <span class="hljs-string">&quot;老师&quot;</span>).start();<br>        <span class="hljs-keyword">new</span> Thread(testSleep2, <span class="hljs-string">&quot;黄牛&quot;</span>).start();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;<br>            <span class="hljs-keyword">if</span> (ticketNum &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;<br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;抢到了第  &quot;</span> + ticketNum-- + <span class="hljs-string">&quot;  张票&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">老师抢到了第  9  张票<br>小明抢到了第  10  张票<br>黄牛抢到了第  8  张票<br>小明抢到了第  6  张票<br>小明抢到了第  4  张票<br>老师抢到了第  7  张票<br>小明抢到了第  3  张票<br>黄牛抢到了第  5  张票<br>小明抢到了第  1  张票<br>老师抢到了第  2  张票<br></code></pre></td></tr></table></figure>

<p>结果似乎看起来是正常的。</p>
<p><strong>当加上模拟延时后</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * sleep 模拟延时</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestSleep2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>  ticketNum = <span class="hljs-number">10</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>&#123;<br>        <span class="hljs-keyword">final</span> TestSleep2 testSleep2 = <span class="hljs-keyword">new</span> TestSleep2();<br>        <span class="hljs-keyword">new</span> Thread(testSleep2, <span class="hljs-string">&quot;小明&quot;</span>).start();<br>        <span class="hljs-keyword">new</span> Thread(testSleep2, <span class="hljs-string">&quot;老师&quot;</span>).start();<br>        <span class="hljs-keyword">new</span> Thread(testSleep2, <span class="hljs-string">&quot;黄牛&quot;</span>).start();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;<br>            <span class="hljs-keyword">if</span> (ticketNum &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">// 模拟延时</span><br>                Thread.sleep(<span class="hljs-number">200</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;抢到了第  &quot;</span> + ticketNum-- + <span class="hljs-string">&quot;  张票&quot;</span>);<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">老师抢到了第  10  张票<br>小明抢到了第  10  张票<br>黄牛抢到了第  10  张票<br>老师抢到了第  9  张票<br>黄牛抢到了第  8  张票<br>小明抢到了第  9  张票<br>小明抢到了第  7  张票<br>老师抢到了第  6  张票<br>黄牛抢到了第  6  张票<br>小明抢到了第  5  张票<br>黄牛抢到了第  3  张票<br>老师抢到了第  4  张票<br>老师抢到了第  2  张票<br>小明抢到了第  2  张票<br>黄牛抢到了第  2  张票<br>小明抢到了第  1  张票<br>黄牛抢到了第  -1  张票<br>老师抢到了第  0  张票<br></code></pre></td></tr></table></figure>

<p>结果是不正常的。可见，添加延时可以放大线程问题的发生性。</p>
<h2 id="线程礼让-yield"><a href="#线程礼让-yield" class="headerlink" title="线程礼让 yield"></a>线程礼让 yield</h2><p>礼让线程，让当前正在执行的线程暂停，但不阻塞</p>
<p>将线程从运行状态转为就绪状态</p>
<p>让  cpu 重新调度，<strong>礼让不一定成功</strong>，看 CPU 心情</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestYield</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        MyYield myYield = <span class="hljs-keyword">new</span> MyYield();<br><br>        <span class="hljs-keyword">new</span> Thread(myYield, <span class="hljs-string">&quot;A&quot;</span>).start();<br>        <span class="hljs-keyword">new</span> Thread(myYield, <span class="hljs-string">&quot;B&quot;</span>).start();<br>    &#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyYield</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;线程正在执行&quot;</span>);<br>        Thread.yield(); <span class="hljs-comment">// 礼让</span><br>        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;线程停止执行&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>执行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">A线程正在执行<br>B线程正在执行<br>A线程正在执行<br>B线程正在执行<br></code></pre></td></tr></table></figure>

<blockquote>
<p>注意礼让是不一定成功的。所以运行结果也可能如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&gt;A线程正在执行<br>&gt;A线程停止执行<br>&gt;B线程正在执行<br>&gt;B线程停止执行<br></code></pre></td></tr></table></figure>
</blockquote>
<h2 id="线程插队-Join"><a href="#线程插队-Join" class="headerlink" title="线程插队 Join"></a>线程插队 Join</h2><p>Join 合并线程，待此线程执行完成功后，再执行其它线程，其它线程阻塞。</p>
<p><strong>可以想象成插队</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestJoin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;线程vip来了&quot;</span> + i);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>&#123;<br>        <span class="hljs-comment">// 启动我们的自定义线程</span><br>        TestJoin testJoin = <span class="hljs-keyword">new</span> TestJoin();<br>        Thread thread = <span class="hljs-keyword">new</span> Thread(testJoin);<br>        thread.start();<br><br>        <span class="hljs-comment">// 主线程</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) &#123;<br>            <span class="hljs-keyword">if</span> (i == <span class="hljs-number">2</span>) &#123;<br>                thread.join(); <span class="hljs-comment">// 插队</span><br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;main&quot;</span> + i);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">main0<br>线程vip来了0<br>线程vip来了1<br>线程vip来了2<br>线程vip来了3<br>线程vip来了4<br>main1<br>main2<br></code></pre></td></tr></table></figure>

<h2 id="线程状态"><a href="#线程状态" class="headerlink" title="线程状态"></a>线程状态</h2><p>线程可以处于以下状态之一：</p>
<ul>
<li><code>NEW</code> 尚未启动的线程处于此状态。 </li>
<li><code>RUNNABLE</code>  在Java虚拟机中执行的线程处于此状态。 </li>
<li><code>BLOCKED</code>  被阻塞等待监视器锁定的线程处于此状态。 </li>
<li><code>WAITING</code> 正在等待另一个线程执行特定动作的线程处于此状态。 </li>
<li><code>TIMED_WAITING</code>  正在等待另一个线程执行动作达到指定等待时间的线程处于此状态。 </li>
<li><code>TERMINATED</code> 已退出的线程处于此状态。 </li>
</ul>
<p>一个线程可以在给定时间点处于一个状态。 这些状态是不反映任何操作系统线程状态的虚拟机状态。 </p>
<blockquote>
<p>NEW：<code>Thread t = new Thread()</code> 线程对象一旦创建就进入到了新生状态</p>
<p>就绪状态：当调用 start() 方法，线程立即进入就绪状态，但不意味着可以立即调度执行</p>
<p>运行状态：进入运行状态，线程才真正执行线程体的代码块</p>
<p>阻塞状态：当调用 sleep，wait 或同步锁定时，线程进入阻塞状态。就是代码不往下执行，阻塞事件解除后，重新进入就绪状态，等待 CPU 调度执行。</p>
<p>Dead：线程中断或者结束。线程进入死亡状态，就不能再重新启动。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestThreadState</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>&#123;<br>        Thread thread = <span class="hljs-keyword">new</span> Thread(() -&gt; &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    Thread.sleep(<span class="hljs-number">1000</span>);<br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;--------------------&quot;</span>);<br>        &#125;);<br><br>        <span class="hljs-comment">// 观察状态</span><br>        Thread.State state = thread.getState();<br>        System.out.println(state);  <span class="hljs-comment">//NEW</span><br><br>        <span class="hljs-comment">// 观察启动后</span><br>        thread.start();<br>        state = thread.getState();<br>        System.out.println(state); <span class="hljs-comment">// NEW</span><br><br>        <span class="hljs-keyword">while</span> (state != Thread.State.TERMINATED) &#123; <span class="hljs-comment">// 只要线程不终止</span><br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>            state = thread.getState(); <span class="hljs-comment">// 更新状态</span><br>            System.out.println(state);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">NEW<br>RUNNABLE<br>TIMED_WAITING<br>RUNNABLE<br>RUNNABLE<br>RUNNABLE<br>RUNNABLE<br>--------------------<br>TERMINATED<br></code></pre></td></tr></table></figure>

<h2 id="线程优先级"><a href="#线程优先级" class="headerlink" title="线程优先级"></a>线程优先级</h2><p>Java 提供一个线程调度器来监控程序中启动后进入就绪状态的所有线程，线程调度器按照优先级决定调度哪个线程来执行。</p>
<p>线程的优先级用数字表示，范围从 1-10</p>
<p><code>Thread.MIN_PRIORITY = 1</code></p>
<p><code>Thread.MAX_PRIORITY = 10</code></p>
<p><code>Thread.NORM_PRIORITY = 1</code></p>
<p>可以使用 <code>getPriority()</code>、<code>setPriority()</code> 改变或获取优先级</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 测试线程的优先级</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestPriority</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;主线程的默认优先级&quot;</span> + Thread.currentThread().getName() + <span class="hljs-string">&quot;--&quot;</span> + Thread.currentThread().getPriority());<br>        MyPriority priority = <span class="hljs-keyword">new</span> MyPriority();<br><br>        Thread t1 = <span class="hljs-keyword">new</span> Thread(priority);<br>        Thread t2 = <span class="hljs-keyword">new</span> Thread(priority);<br>        Thread t3 = <span class="hljs-keyword">new</span> Thread(priority);<br>        Thread t4 = <span class="hljs-keyword">new</span> Thread(priority);<br>        Thread t5 = <span class="hljs-keyword">new</span> Thread(priority);<br>        Thread t6 = <span class="hljs-keyword">new</span> Thread(priority);<br><br>        <span class="hljs-comment">// 先设置优先级，再启动</span><br>        t1.start();<br><br>        t2.setPriority(<span class="hljs-number">1</span>);<br>        t2.start();<br><br>        t3.setPriority(<span class="hljs-number">4</span>);<br>        t3.start();<br><br>        t4.setPriority(Thread.MAX_PRIORITY);<br>        t4.start();<br><br>        t5.setPriority(-<span class="hljs-number">1</span>);<br>        t5.start();<br><br>        t6.setPriority(<span class="hljs-number">11</span>);<br>        t6.start();<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPriority</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;---&quot;</span> + Thread.currentThread().getPriority());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">主线程的默认优先级main--5<br>Thread-0---5<br>Thread-3---10<br>Thread-2---4<br>Thread-1---1<br>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException<br>	at java.base/java.lang.Thread.setPriority(Thread.java:1141)<br>	at com.example.demo.concurrent.demo01.TestPriority.main(TestPriority.java:32)<br></code></pre></td></tr></table></figure>

<p>多次运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">主线程的默认优先级main--5<br>Thread-2---4<br>Thread-0---5<br>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException<br>	at java.base/java.lang.Thread.setPriority(Thread.java:1141)<br>	at com.example.demo.concurrent.demo01.TestPriority.main(TestPriority.java:32)<br>Thread-1---1<br>Thread-3---10<br></code></pre></td></tr></table></figure>

<blockquote>
<p>优先级低只是意味着获得调度的概率低，并不是邮件及低就不会被先调用了。这都看 CPU 的调度。</p>
</blockquote>
<h2 id="守护线程"><a href="#守护线程" class="headerlink" title="守护线程"></a>守护线程</h2><p>线程分为用户线程和守护线程</p>
<p>虚拟机必须确保用户线程执行完毕 （main 线程）</p>
<p>虚拟机不用等待守护线程执行完毕（GC 线程）</p>
<p>如：后台记录操作日志、监控内存、垃圾回收等</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestDaemon</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-keyword">final</span> God god = <span class="hljs-keyword">new</span> God();<br>        <span class="hljs-keyword">final</span> My my = <span class="hljs-keyword">new</span> My();<br><br>        <span class="hljs-keyword">final</span> Thread godThread = <span class="hljs-keyword">new</span> Thread(god);<br>        godThread.setDaemon(<span class="hljs-keyword">true</span>);  <span class="hljs-comment">// 默认是 false，即用户现场</span><br>        godThread.start(); <span class="hljs-comment">// 上帝守护线程启动</span><br><br>        <span class="hljs-keyword">new</span> Thread(my).start(); <span class="hljs-comment">// 用户线程启动</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">// 你自己</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">My</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;难受的活着&quot;</span>);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;-----------我死啦---------------&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 上帝</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">God</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;上帝无休止地疯狂滴嘲笑着这世间&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">上帝无休止地疯狂滴嘲笑着这世间<br>上帝无休止地疯狂滴嘲笑着这世间<br>……………中间省略N 行…………………………<br>上帝无休止地疯狂滴嘲笑着这世间<br>上帝无休止地疯狂滴嘲笑着这世间<br>-----------我死啦---------------<br>上帝无休止地疯狂滴嘲笑着这世间<br>上帝无休止地疯狂滴嘲笑着这世间<br>……………中间省略N 行…………………………<br>上帝无休止地疯狂滴嘲笑着这世间<br>上帝无休止地疯狂滴嘲笑着这世间<br></code></pre></td></tr></table></figure>

<p>可以看到随着 main 线程的结束，守护线程自己结束了。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Limor</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://kangjia1324.github.io/04-Java/concurrent/05%20Java%20%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/">https://kangjia1324.github.io/04-Java/concurrent/05 Java 多线程基础/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://kangjia1324.github.io" target="_blank">林深时觉寒</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">并发编程</a><a class="post-meta__tags" href="/tags/Java/">Java</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/7.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/wechat1.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/wechat1.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/alipay1.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/alipay1.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/04-Java/concurrent/06%20%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%8D%8F%E4%BD%9C/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/34.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">06 线程同步与协作</div></div></a></div><div class="next-post pull-right"><a href="/04-Java/concurrent/04%20%E5%B9%B6%E5%8F%91%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/47.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">04 并发编程理论基础</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/04-Java/concurrent/00 Java 并发编程专题/" title="00 Java 并发编程专题"><img class="cover" src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/9.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-31</div><div class="title">00 Java 并发编程专题</div></div></a></div><div><a href="/04-Java/concurrent/01 Java 并发机制的底层原理/" title="01 Java 并发机制的底层原理"><img class="cover" src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/50.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-21</div><div class="title">01 Java 并发机制的底层原理</div></div></a></div><div><a href="/04-Java/concurrent/02 Java 内存模型基础/" title="02 Java 内存模型基础"><img class="cover" src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-22</div><div class="title">02 Java 内存模型基础</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/toux1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Limor</div><div class="author-info__description">A little coder.</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/kangjia1324"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/kangjia1324" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:2466267753@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#05-Java-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">05 Java 多线程基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%9B%9B%E7%A7%8D%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text">线程四种创建方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF-Thread-%E7%B1%BB"><span class="toc-number">1.1.1.</span> <span class="toc-text">继承 Thread 类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-Runnable-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.1.2.</span> <span class="toc-text">实现 Runnable 接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-Callable-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.1.3.</span> <span class="toc-text">实现 Callable 接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Executors-%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E6%B1%A0"><span class="toc-number">1.1.4.</span> <span class="toc-text">使用 Executors 工具类创建线程池</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#runnable-%E5%92%8C-callable-%E5%AF%B9%E6%AF%94"><span class="toc-number">1.1.5.</span> <span class="toc-text">runnable 和 callable 对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%B0%83%E7%94%A8-start-%E8%80%8C%E4%B8%8D%E7%9B%B4%E6%8E%A5%E8%B0%83%E7%94%A8-run"><span class="toc-number">1.1.6.</span> <span class="toc-text">为什么调用 start() 而不直接调用 run()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%9A%84-run-%E5%92%8C-start-%E5%8C%BA%E5%88%AB"><span class="toc-number">1.1.7.</span> <span class="toc-text">线程的 run() 和 start() 区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%81%9C%E6%AD%A2"><span class="toc-number">1.2.</span> <span class="toc-text">线程停止</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E4%BC%91%E7%9C%A0-sleep"><span class="toc-number">1.3.</span> <span class="toc-text">线程休眠 sleep</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sleep-%E6%9C%89%E5%95%A5%E7%89%B9%E7%82%B9"><span class="toc-number">1.3.1.</span> <span class="toc-text">sleep 有啥特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wait-%E5%92%8C-sleep-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.3.2.</span> <span class="toc-text">wait 和 sleep 的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%80%92%E8%AE%A1%E6%97%B6"><span class="toc-number">1.3.3.</span> <span class="toc-text">实现倒计时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%8B%9F%E5%BB%B6%E6%97%B6"><span class="toc-number">1.3.4.</span> <span class="toc-text">模拟延时</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%A4%BC%E8%AE%A9-yield"><span class="toc-number">1.4.</span> <span class="toc-text">线程礼让 yield</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E6%8F%92%E9%98%9F-Join"><span class="toc-number">1.5.</span> <span class="toc-text">线程插队 Join</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81"><span class="toc-number">1.6.</span> <span class="toc-text">线程状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">1.7.</span> <span class="toc-text">线程优先级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.8.</span> <span class="toc-text">守护线程</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/04-Java/concurrent/00%20Java%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98/" title="00 Java 并发编程专题"><img src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="00 Java 并发编程专题"/></a><div class="content"><a class="title" href="/04-Java/concurrent/00%20Java%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98/" title="00 Java 并发编程专题">00 Java 并发编程专题</a><time datetime="2021-05-31T10:10:14.000Z" title="发表于 2021-05-31 18:10:14">2021-05-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/04-Java/concurrent/12%20%E8%A1%A5%E5%85%85%E4%BA%8C%EF%BC%9AJava%20%E4%B8%AD%E7%9A%84%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/" title="12 补充二：Java 中的阻塞队列"><img src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="12 补充二：Java 中的阻塞队列"/></a><div class="content"><a class="title" href="/04-Java/concurrent/12%20%E8%A1%A5%E5%85%85%E4%BA%8C%EF%BC%9AJava%20%E4%B8%AD%E7%9A%84%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/" title="12 补充二：Java 中的阻塞队列">12 补充二：Java 中的阻塞队列</a><time datetime="2021-05-02T02:10:14.000Z" title="发表于 2021-05-02 10:10:14">2021-05-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/04-Java/concurrent/11%20%E8%A1%A5%E5%85%85%E4%B8%80%EF%BC%9A%E5%85%AB%E9%94%81%E7%8E%B0%E8%B1%A1%E5%BD%BB%E5%BA%95%E7%90%86%E8%A7%A3%E9%94%81/" title="11 补充一：八锁现象彻底理解锁"><img src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/43.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="11 补充一：八锁现象彻底理解锁"/></a><div class="content"><a class="title" href="/04-Java/concurrent/11%20%E8%A1%A5%E5%85%85%E4%B8%80%EF%BC%9A%E5%85%AB%E9%94%81%E7%8E%B0%E8%B1%A1%E5%BD%BB%E5%BA%95%E7%90%86%E8%A7%A3%E9%94%81/" title="11 补充一：八锁现象彻底理解锁">11 补充一：八锁现象彻底理解锁</a><time datetime="2021-05-01T02:30:24.000Z" title="发表于 2021-05-01 10:30:24">2021-05-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/04-Java/concurrent/10%20JUC%20%E6%8A%80%E6%9C%AF%E5%9B%9B%EF%BC%9AJUC%20%E5%8C%85%E4%B8%8B%E7%9A%84%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/" title="10 JUC 技术四：JUC 包下的常用工具"><img src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/27.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="10 JUC 技术四：JUC 包下的常用工具"/></a><div class="content"><a class="title" href="/04-Java/concurrent/10%20JUC%20%E6%8A%80%E6%9C%AF%E5%9B%9B%EF%BC%9AJUC%20%E5%8C%85%E4%B8%8B%E7%9A%84%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/" title="10 JUC 技术四：JUC 包下的常用工具">10 JUC 技术四：JUC 包下的常用工具</a><time datetime="2021-04-30T02:30:24.000Z" title="发表于 2021-04-30 10:30:24">2021-04-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/04-Java/concurrent/09%20JUC%20%E6%8A%80%E6%9C%AF%E4%B8%89%EF%BC%9A%E8%AF%A6%E8%A7%A3%20Executor%20%E6%A1%86%E6%9E%B6/" title="09 JUC 技术三：详解 Executor 框架"><img src="https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/34.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="09 JUC 技术三：详解 Executor 框架"/></a><div class="content"><a class="title" href="/04-Java/concurrent/09%20JUC%20%E6%8A%80%E6%9C%AF%E4%B8%89%EF%BC%9A%E8%AF%A6%E8%A7%A3%20Executor%20%E6%A1%86%E6%9E%B6/" title="09 JUC 技术三：详解 Executor 框架">09 JUC 技术三：详解 Executor 框架</a><time datetime="2021-04-29T02:30:24.000Z" title="发表于 2021-04-29 10:30:24">2021-04-29</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/kangjia1324/Figurebed/data/7.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2021 By Limor</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://kangjia1324.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>